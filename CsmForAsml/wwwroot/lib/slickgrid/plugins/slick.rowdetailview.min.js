/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/slickgrid@2.4.27/plugins/slick.rowdetailview.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){e.extend(!0,window,{Slick:{Plugins:{RowDetailView:function(t){var i,n,o,a,l="id",r=null,s=this,d=null,u=[],c=new Slick.EventHandler,p=5,w=0,g={columnId:"_detail_selector",cssClass:"detailView-toggle",expandedClass:null,collapsedClass:null,keyPrefix:"_",loadOnce:!1,collapseAllOnSort:!0,saveDetailViewOnScroll:!0,singleRowExpand:!1,useSimpleViewportCalc:!1,alwaysRenderColumn:!0,toolTip:"",width:30,maxRows:null},f=g.keyPrefix,m=0,R=[],v=e.extend(!0,{},g,t);"function"==typeof v.expandableOverride&&A(v.expandableOverride);function h(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function b(t,n){var o=i.getDataItem(n.row);if(k(n.row,o,i)&&(v.useRowClick||i.getColumns()[n.cell].id===v.columnId&&e(t.target).hasClass(v.cssClass))){if(i.getEditorLock().isActive()&&!i.getEditorLock().commitCurrentEdit())return t.preventDefault(),void t.stopImmediatePropagation();s.onBeforeRowDetailToggle.notify({grid:i,item:o},t,s),function(e,t){if(!k(e,t,i))return;a.beginUpdate(),n=t,n&&(n[f+"collapsed"]?P(n):I(n)),a.endUpdate();var n}(n.row,o),s.onAfterRowDetailToggle.notify({grid:i,item:o,expandedRows:u},t,s),t.stopPropagation(),t.stopImmediatePropagation()}}function x(e,t){v.useSimpleViewportCalc?function(){if(i){var e=i.getRenderedRange();u.forEach(function(t){var i=a.getRowById(t[l]),n=function(e,t){if(Math.abs(t.bottom-m-e)>2*w)return!0;return!1}(i,e);!n&&h(R,t[l])>=0?C(t,t[l]):n&&y(t,t[l])})}}():function(){if(i){var e=i.getRenderedRange();if(u.length>0){var t="DOWN";if(d){if(d.top===e.top&&d.bottom===e.bottom)return;(d.top>e.top||0===d.top&&0===e.top&&d.bottom>e.bottom)&&(t="UP")}}u.forEach(function(i){var n=a.getRowById(i[l]),o=i[f+"sizePadding"],r=h(R,i[l])>=0;"UP"===t?(v.saveDetailViewOnScroll&&n>=e.bottom-m&&O(i),r&&n-p<e.top&&n>=e.top?C(i,i[l]):!r&&n+o>e.bottom&&y(i,i[l])):"DOWN"===t&&(v.saveDetailViewOnScroll&&n<=e.top+m&&O(i),r&&n+o+p>e.bottom&&n<n+o?C(i,i[l]):!r&&n<e.top&&y(i,i[l]))}),d=e}}()}function y(e,t){var n=e.rowIndex||a.getRowById(e[l]);s.onRowOutOfViewportRange.notify({grid:i,item:e,rowId:t,rowIndex:n,expandedRows:u,rowIdsOutOfViewport:D(t,!0)},null,s)}function C(t,n){var o=t.rowIndex||a.getRowById(t[l]);setTimeout(function(){e(".cellDetailView_"+t[l]).length&&s.onRowBackToViewportRange.notify({grid:i,item:t,rowId:n,rowIndex:o,expandedRows:u,rowIdsOutOfViewport:D(n,!1)},null,s)},100)}function D(e,t){var i=h(R,e);return t&&i<0?R.push(e):!t&&i>=0&&R.splice(i,1),R}function V(){a.beginUpdate();for(var e=u.length-1;e>=0;e--)I(u[e],!0);a.endUpdate()}function I(e,t){t||a.beginUpdate(),v.loadOnce&&O(e),e[f+"collapsed"]=!0;for(var i=1;i<=e[f+"sizePadding"];i++)a.deleteItem(e[l]+"."+i);e[f+"sizePadding"]=0,a.updateItem(e[l],e),u=u.filter(function(t){return t[l]!==e[l]}),t||a.endUpdate()}function P(e){if(v&&v.singleRowExpand&&V(),e[f+"collapsed"]=!1,u.push(e),e[f+"detailContent"]||(e[f+"detailViewLoaded"]=!1),e[f+"detailViewLoaded"]&&!0===v.loadOnce)return s.onAsyncResponse.notify({item:e,itemDetail:e,detailView:e[f+"detailContent"]},void 0,this),z(e),void a.updateItem(e[l],e);e[f+"detailContent"]=v.preTemplate(e),z(e),a.updateItem(e[l],e),v.process(e)}function O(t){var i=e("."+o+" .innerDetailView_"+t[l]);if(i){var n=e("."+o+" .innerDetailView_"+t[l]).html();void 0!==n&&(t[f+"detailContent"]=n)}}var S=function(e,t){var n={};for(var o in i.getData())n[o]=null;return n[l]=e[l]+"."+t,n[f+"collapsed"]=!0,n[f+"isPadding"]=!0,n[f+"parent"]=e,n[f+"offset"]=t,n};function z(e){var t=v.panelRows;e[f+"sizePadding"]=Math.ceil(2*t*13/n.rowHeight),e[f+"height"]=e[f+"sizePadding"]*n.rowHeight;for(var i=a.getIdxById(e[l]),o=1;o<=e[f+"sizePadding"];o++)a.insertItem(i+o,S(e,o))}function E(e,t,i,o,a,r){if(!k(e,a,r))return null;if(null==a[f+"collapsed"]&&(a[f+"collapsed"]=!0,a[f+"sizePadding"]=0,a[f+"height"]=0,a[f+"isPadding"]=!1,a[f+"parent"]=void 0,a[f+"offset"]=0),!a[f+"isPadding"]){if(a[f+"collapsed"]){var s=v.cssClass+" expand ";return v.collapsedClass&&(s+=v.collapsedClass),'<div class="'+s+'"></div>'}var d=[],u=n.rowHeight,c=a[f+"sizePadding"]*n.rowHeight;null!==v.maxRows&&a[f+"sizePadding"]>v.maxRows&&(c=v.maxRows*u,a[f+"sizePadding"]=v.maxRows);var p=v.cssClass+" collapse ";return v.expandedClass&&(p+=v.expandedClass),d.push('<div class="'+p+'"></div></div>'),d.push('<div class="dynamic-cell-detail cellDetailView_',a[l],'" '),d.push('style="height:',c,"px;"),d.push("top:",u,'px">'),d.push('<div class="detail-container detailViewContainer_',a[l],'">'),d.push('<div class="innerDetailView_',a[l],'">',a[f+"detailContent"],"</div></div>"),d.join("")}return null}function k(e,t,i){return"function"!=typeof r||r(e,t,i)}function A(e){r=e}e.extend(this,{init:function(e){if(!e)throw new Error('RowDetailView Plugin requires the Grid instance to be passed as argument to the "init()" method');i=e,o=e.getUID(),n=e.getOptions()||{},a=i.getData(),f=v&&v.keyPrefix||"_",m=i.getOptions().minRowBuffer,i.getOptions().minRowBuffer=v.panelRows+3,c.subscribe(i.onClick,b).subscribe(i.onScroll,x),v.collapseAllOnSort&&(c.subscribe(i.onSort,V),u=[],R=[]);c.subscribe(i.getData().onRowCountChanged,function(){i.updateRowCount(),i.render()}),c.subscribe(i.getData().onRowsChanged,function(e,t){i.invalidateRows(t.rows),i.render()}),s.onAsyncResponse.subscribe(function(e,t){if(!t||!t.item&&!t.itemDetail)throw'Slick.RowDetailView plugin requires the onAsyncResponse() to supply "args.item" property.';var n=t.item||t.itemDetail;t.detailView?n[f+"detailContent"]=t.detailView:n[f+"detailContent"]=v.postTemplate(n),n[f+"detailViewLoaded"]=!0,a.updateItem(n[l],n),s.onAsyncEndUpdate.notify({grid:i,item:n,itemDetail:n},e,s)}),c.subscribe(a.onSetItemsCalled,function(e,t){l=a&&a.getIdPropertyName()||"id"}),v.useSimpleViewportCalc&&c.subscribe(i.onRendered,function(e,t){t&&t.endRow&&(w=t.endRow-t.startRow)})},destroy:function(){c.unsubscribeAll(),s.onAsyncResponse.unsubscribe(),s.onAsyncEndUpdate.unsubscribe(),s.onAfterRowDetailToggle.unsubscribe(),s.onBeforeRowDetailToggle.unsubscribe(),s.onRowOutOfViewportRange.unsubscribe(),s.onRowBackToViewportRange.unsubscribe()},pluginName:"RowDetailView",collapseAll:V,collapseDetailView:I,expandDetailView:P,expandableOverride:A,getColumnDefinition:function(){return{id:v.columnId,name:"",toolTip:v.toolTip,field:"sel",width:v.width,resizable:!1,sortable:!1,alwaysRenderColumn:v.alwaysRenderColumn,cssClass:v.cssClass,formatter:E}},getExpandedRows:function(){return u},getFilterItem:function(e){e[f+"isPadding"]&&e[f+"parent"]&&(e=e[f+"parent"]);return e},getOptions:function(){return v},resizeDetailView:function(e){if(!e)return;var t=document.querySelector("."+o+" .detailViewContainer_"+e[l]),r=document.querySelector("."+o+" .cellDetailView_"+e[l]),s=document.querySelector("."+o+" .innerDetailView_"+e[l]);if(!t||!r||!s)return;for(var d=1;d<=e[f+"sizePadding"];d++)a.deleteItem(e[l]+"."+d);var u=n.rowHeight;t.style.minHeight=null;var c=t.scrollHeight,p=Math.ceil(c/u);e[f+"sizePadding"]=Math.ceil(2*p*13/u),e[f+"height"]=c;var w=e[f+"sizePadding"]*u;null!==v.maxRows&&e[f+"sizePadding"]>v.maxRows&&(w=v.maxRows*u,e[f+"sizePadding"]=v.maxRows);i.getOptions().minRowBuffer<e[f+"sizePadding"]&&(i.getOptions().minRowBuffer=e[f+"sizePadding"]+3);t.setAttribute("style","min-height: "+e[f+"height"]+"px"),r&&r.setAttribute("style","height: "+w+"px; top:"+u+"px");for(var g=a.getIdxById(e[l]),d=1;d<=e[f+"sizePadding"];d++)a.insertItem(g+d,S(e,d));O(e)},saveDetailView:O,setOptions:function(t){(v=e.extend(!0,{},v,t))&&v.singleRowExpand&&V()},onAsyncResponse:new Slick.Event,onAsyncEndUpdate:new Slick.Event,onAfterRowDetailToggle:new Slick.Event,onBeforeRowDetailToggle:new Slick.Event,onRowOutOfViewportRange:new Slick.Event,onRowBackToViewportRange:new Slick.Event})}}}})}(jQuery);
//# sourceMappingURL=/sm/4416a31e576998b74344d0100bb5aad965242cfbfc2d064128c640e095a01a9a.map